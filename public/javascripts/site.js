// Generated by CoffeeScript 1.7.1
(function() {
  $(function() {
    var get_profile_by_name, init_sidebar_profile_list;
    init_sidebar_profile_list = function() {
      $.get('/data/profile/all', function(data) {
        var i, p, s_list, tmp, _i, _len, _ref;
        s_list = $("#sidebar_profile_list");
        s_list.empty();
        _ref = data['ret'];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          i = _ref[_i];
          p = i['profile'];
          tmp = document.createElement("a");
          $(tmp).addClass("btn btn-default");
          $(tmp).attr("name", "" + p);
          $(tmp).text("" + p);
          $(tmp).bind('click', function() {
            return get_profile_by_name($(this).attr("name"));
          });
          s_list.append(tmp);
        }
      });
    };
    get_profile_by_name = function(name) {
      var get_detail_by_sid;
      $.get("/data/profile/by/" + name, function(data) {
        var k, kargs, l, ret, row, s_kargs, state, td, top, v, _i, _len, _results;
        ret = data['ret'];
        top = $("#main_tbody");
        top.empty();
        _results = [];
        for (_i = 0, _len = ret.length; _i < _len; _i++) {
          l = ret[_i];
          row = document.createElement("tr");
          for (k in l) {
            v = l[k];
            td = document.createElement("td");
            if (k === "state") {
              state = document.createElement('span');
              if (v === 1) {
                $(state).addClass("label label-danger");
                $(state).text("Failed");
              } else {
                $(state).addClass("label label-success");
                $(state).text("Passed");
              }
              $(state).attr("name", l['session_id']);
              $(state).bind('click', get_detail_by_sid);
              $(td).append(state);
            } else if (k === "additional_kargs") {
              s_kargs = v.slice(0, 40);
              kargs = "<abbr title=\"" + v + "\">" + s_kargs + "</abbr>";
              $(td).append(kargs);
            } else {
              $(td).text(v);
            }
            $(row).append(td);
          }
          _results.push(top.append(row));
        }
        return _results;
      });
      return get_detail_by_sid = function(s_id) {
        alert($(this).attr('name'));
      };
    };
    return init_sidebar_profile_list();
  });

}).call(this);

//# sourceMappingURL=site.map
